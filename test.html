<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Highcharts Example</title>
		
		
		<!-- 1. Add these JavaScript inclusions in the head of your page -->
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script type="text/javascript" src="http://code.highcharts.com/highcharts.js"></script>
        <script type="text/javascript" src="js/exporting.js"></script>
		

		<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.4.2.min.js"></script>

		<!-- Parse initialization -->
		<script>
		Parse.initialize("6s0wYYKZR2sQU8zMV304cL8jv5Pdmp3PzOIwKLOp", "7C1XQAKjUdhiH6k25tRIbVOweuNMoFy0n0An4LJf");
		</script>
		


	</head>
	<body>

		
		<!-- 3. Add the container -->
		<div id="container" style="width: 800px; height: 400px; margin: 0 auto"></div>

		<!-- 2. Add the JavaScript to initialize the chart on document ready -->
		<script>
			function QueryServer() {
				var fruits = Parse.Object.extend("fruits");
				var query = new Parse.Query(fruits);

				query.find({
				  success: function(results) {
				  	alert("Results found:" + results.length);

				    CreateChart(results);

				  },
				  error: function(error) {
				    alert("Error: " + error.code + " " + error.message);
				  }

				});
			}

			function CreateChart(results) {

				var options = {
					chart: {
						renderTo: 'container',
						type: 'column'
					},
					title: {
						text: 'Fruit Consumption'
					},
					xAxis: {
						categories: []
					},
					yAxis: {
						title: {
							text: 'Units'
						}
					},

                    credits: {
                        enabled: false
                    },

					series: []

					};

				var series0 = { 
							data: []
							
						};
				var series1 = { 
							data: []
							
						};

				var series2 = { 
							data: []
							
						};

				var series3 = { 
							data: []
							
						};


				for (var i = 0; i < results.length; i++) {
				var numapples = results[i].get('Apples');
				var numoranges = results[i].get('Oranges');
				var numplums = results[i].get('Plums');
				var numpears = results[i].get('Pears');
				var names = results[i].get('Name');
				series0.data.push(numapples);
				series1.data.push(numoranges);
				series2.data.push(numplums);
				series3.data.push(numpears);	
				options.xAxis.categories.push(names);			
				}				
					


				options.series.push(series0,series1, series2, series3);
				
				



					

				



				var chart = new Highcharts.Chart(options);
			}
			

			$(document).ready(function() {
				QueryServer();

			});


		</script>



		


		
				
	</body>
</html>